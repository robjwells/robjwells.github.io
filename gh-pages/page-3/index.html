<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Primary Unit mirror on GitHub â€“ page 3</title>

  <!-- Load my combined stylesheet -->
  <link rel="stylesheet" href="/resources/all.min.css">


  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/">

  <link rel="alternate" type="application/rss+xml" title="RSS feed for Primary Unit" href="/rss">
  <link rel="alternate" type="application/json" title="JSON feed for Primary Unit" href="/feed.json">

  <!-- Apple pinned sites icon, Apple touch icon, Favicon -->
  <link rel="mask-icon" href="/resources/favicon.svg" color="#1369BF">
  <link rel="apple-touch-icon-precomposed" href="/resources/favicon.png">
  <link rel="icon" href="/resources/favicon.ico">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A mirror of https://www.robjwells.com hosted on GitHub">
</head>

<body>

<div class="wrapper">

<header class="site-header">

  <div class="site-title-container mute-links">
    <h1 class="site-title"><a href="https://robjwells.github.io">Primary Unit mirror on GitHub</a></h1>
    <p class="site-byline"><i>by</i> Rob Wells</p>
  </div>

  <div class="site-menu-container">

    <nav id="site-nav">
      <ul class="site-links mute-links">
        <li><a href="/about/">About</a></li>
        <li><a href="/archives/">Archives</a></li>
        <li><a href="/feed.json">JSON&nbsp;feed</a></li>
        <li><a href="/rss">RSS&nbsp;feed</a></li>
      </ul>
    </nav>

    <label for="search-field" class="site-search-label">
      Site search
    </label>
    <form id="site-search" class="site-search" method="get" action="https://duckduckgo.com/">
      <input name="q" type="text" id="search-field" class="search-field" placeholder="via DuckDuckGo">
      <input name="sites" value="https://robjwells.github.io" hidden>
      <button type="submit" class="search-button">Search</button>
    </form>

  </div> <!-- .site-menu-container -->

</header> <!-- .site-header -->

<main role="main">

  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2017/12/skype-emoji-cache/">Skypeâ€™s emoji cache</a></h2>
      <p><time datetime="2017-12-19T11:31">Tuesday, December 19 2017</time></p>
    </header>
    <p>Skype, a 117MB application (as of right now, on macOS at least), keeps a 340MB stash of emojis on your computer. What?</p>
<p>Clearing some space on my SSD today, I notice that Skypeâ€™s Application Support folder takes up over 600MB.</p>
<p class="full-width">
    <img
        src="/images/2017-12-19-skype-application-support.png"
        alt="A screenshot of Daisy Disk showing Skypeâ€™s Application Support folder taking up 603.6MB"
        class="no-border"
        width=720
        height=540
        />
</p>

<p>The Upgrade subfolder contains 230MB of old Skype versions, with the oldest dating back to late 2012. Thatâ€™s a little odd, to keep a five-year-old version around, but fine.</p>
<p>
    <img
        src="/images/2017-12-19-skype-upgrade.png"
        alt="A screenshot showing Skypeâ€™s Upgrade folder, containing five previous versions, with the oldest dating back five years."
        />
</p>

<p>How far weâ€™ve come: Skype today is over five times the size it was five years ago.</p>
<p>Drilling down into the robjwells subfolder we find emo_cache_v2, accounting for nearly all the 370MB size of its parents. Whatâ€™s inside? 5,138 emojis and animations. Hereâ€™s a taste:</p>
<p>
  <video
    controls
    muted
    preload="none"
    playsinline
    poster="/images/2017-12-19-skype-animation.jpg"
    src="/images/2017-12-19-skype-animation.mp4"
    >
  </video>
</p>

<p>Except that, unlike the super-low-quality version above, the original is 2.4MB and has a delightful reggae soundtrack to accompany its 17-second length.</p>
<p>5,000 of these things. Thereâ€™s even a Forrest Gump one!</p>
<p>And youâ€™d think â€œcacheâ€ means that â€œyou sent this before, you might need it againâ€ â€” but as far as I can remember Iâ€™ve only ever sent â€œstandardâ€ emojis on Skype. ğŸ¤·â€â™€ï¸</p>
<div class="flag">
  <p><b>Postscript:</b> If you delete all the mp4 and png files in that directory and then relaunch Skype, it will refill it â€” but with 3.5MB of animated png emojis.</p>
  <p><b>Post-postscript:</b> I changed the title to remove the emoji as some feed-reading services (like Feed Wrangler, the one I use), couldnâ€™t handle
  ğŸ¤¦â€â™€ï¸. Oh well ğŸ¤¦â€â™‚ï¸. (And, funnily enough, BBEdit doesnâ€™t handle the â€œemoji + zero width joiner + modifierâ€ as a single character. Unicode is hard.)</p>
</div>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2017/09/we-must-end-the-century-of-the-car/">We must end the century of the car</a></h2>
      <p><time datetime="2017-09-29T14:40">Friday, September 29 2017</time></p>
    </header>
    <p>This originally appeared in <a href="http://morningstaronline.co.uk/a-a624-We-must-put-the-century-of-the-car-to-an-end">the Morning Star of Thursday September 28 2017</a>. The <a href="/images/2017-09-28-RW-transport-feature.jpg">print version</a> (<a href="/images/2017-09-28-RW-transport-feature.pdf"><em>large</em> PDF version here</a>) included photographs by <a href="https://twitter.com/hackneycyclist">Hackney Cyclist</a> and the <a href="https://twitter.com/rantyhighwayman">Ranty Highwayman</a>, to whom Iâ€™m incredibly grateful, of people going about their everyday lives by cycle in the Netherlands â€” which I think absolutely made it.</p>
<hr />
<p>It is thankfully now accepted that if we are to stand any chance of tackling climate change <a href="https://www.ipcc.ch/pdf/assessment-report/ar5/wg3/ipcc_wg3_ar5_chapter8.pdf">we must change the way we move people and goods around</a>.</p>
<p>Most talk has been about replacing petrol and diesel cars with electrics. Even our Tory government â€” whose ministers have never encountered a deposit of fossil fuel they didnâ€™t want to dig up and set on fire â€” has set <a href="http://www.bbc.co.uk/news/uk-40723581">a date from which the sale of new oil-burning cars will be banned</a>. Never mind that itâ€™s the hopelessly and meaninglessly far away year of 2040.</p>
<p>We have to stop burning oil because itâ€™s killing the planet. And that will kill us and our entire species. But the certainty of swapping our oil cars for electric cars as the next logical step for transport neatly somersaults over a flaming Cheddar Gorge full of problems.</p>
<p>But it isnâ€™t the only path open to us; a different one can help us tackle not only the climate crisis but also many health and social problems. Environmental expert <a href="http://www.morningstaronline.co.uk/a-837d-No-growth-but-lots-of-opportunities/#.WcAmeet4WrV">Alan Simpson wrote in these pages in July</a> that â€œsustainability has to turn economics [and its obsession with GDP growth] on its head, putting work, wellbeing, security and inclusion at the centre.â€</p>
<p>In the same way that we canâ€™t just install a few gigawatts of renewable power and call it a day, we must think differently and, crucially, have the political courage to pursue an alternative strategy that upends most of a century of transport orthodoxy.</p>
<p>We are certainly barreling towards an electric-car future: <a href="https://www.theguardian.com/business/2017/jul/06/france-ban-petrol-diesel-cars-2040-emmanuel-macron-volvo">France also wants to halt oil-car sales from 2040, India and bits of Germany 2030, Norway 2025</a>. People will buy electrics instead of petrol and diesel; they plug in at home instead of filling up at a garage. Simple, done.</p>
<p>This doesnâ€™t quite work though. For one, <a href="https://www.theguardian.com/environment/green-living-blog/2010/sep/23/carbon-footprint-new-car">manufacturing a new car emits roughly as much CO2 as what comes out of the exhaust during its lifetime usage</a>. And the equivalent to the per-mile emissions varies depending on how clean the electricity grid is; <a href="https://www.electricitymap.org/?wind=false&amp;solar=false&amp;page=country&amp;countryCode=GB">in Britain most power is from burning gas</a>, with some coal, nuclear and wind.</p>
<p>It is also going to take a lot of electricity if we switch en masse to electric cars. Itâ€™s difficult to comprehend the huge amount of energy used by cars because they use a separate, somewhat obscured form of distribution â€” petrol stations.</p>
<p>National Grid warned this summer that, even under optimistic estimates, <a href="https://www.theguardian.com/business/2017/jul/13/electric-car-boom-power-demand-national-grid-hinkley-point-c">charging the expected number of electric cars in 2030 will use up all of the power from the under-construction Hinkley Point C nuclear plant</a>. And it could be more than double the plantâ€™s capacity â€” and this is <a href="https://www.greenpeace.org.uk/hinkley-nuclear-power-station-will-haunt-britain-decades-20160727/">the most expensive single object ever constructed on the planet</a>.</p>
<p>Electric cars still add to air pollution â€” small particulate matter <a href="https://www.theguardian.com/environment/2016/sep/11/polluting-effect-wear-brakes-tyres-pollutionwatch">from tyre and brake pad wear</a> which is <a href="https://www.theguardian.com/environment/2017/aug/04/london-should-lead-in-showing-electric-cars-will-not-tackle-air-pollution">damaging to health</a>.</p>
<p>But the real problem is not the kind of motors we run on our roads â€” itâ€™s the fact that the private car is the dominant mode of transport. We live in a car-dependent society, with people in many communities often legitimately having no other option. Since the 1950s Britain has very deliberately planned and provided for private car use and our streets and our society reflect that.</p>
<p>Car-dependence is killing us. Partly through pollution, which <a href="https://unearthed.greenpeace.org/2017/03/06/air-pollution-cause-40000-deaths-every-year-fact-check-linked/">shortens lives to the point that itâ€™s equivalent to 40,000 excess deaths a year</a>. Partly through <a href="https://www.gov.uk/government/statistics/reported-road-casualties-great-britain-annual-report-2015">the 1,800 people killed and 22,000 seriously injured each year in car crashes</a>. But mainly by eliminating physical activity from peopleâ€™s day-to-day lives.</p>
<p>In Britain <a href="https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/216370/dh_128210.pdf">more than half of adults</a> donâ€™t do the recommended 150 minutes of <a href="http://www.who.int/dietphysicalactivity/physical_activity_intensity/en/">â€œmoderateâ€ activity</a> (hoovering, mowing the lawn, walking at 3mph) or 75 minutes of <a href="http://www.who.int/dietphysicalactivity/physical_activity_intensity/en/">â€œvigorousâ€ activity</a> (jogging, swimming, cycling briskly) a week. Six million middle-aged people <a href="https://www.theguardian.com/lifeandstyle/2017/aug/24/around-6-million-middle-aged-english-people-take-no-exercise">walk for less than 10 minutes at a go</a> a month.</p>
<p>The effects on our health are huge. Inactivity is <a href="https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/374914/Framework_13.pdf">the fourth largest cause of disease and disability</a> and <a href="https://www.bhf.org.uk/-/media/files/research/heart-statistics/physical-inactivity-report---mymarathon-final.pdf">contributes to one in six deaths from any cause</a>. Worldwide, <a href="http://www.bbc.co.uk/news/uk-wales-politics-18876880">sedentary lives and resulting illnesses kill 5.3 million people a year</a>. NHS England boss Simon Stevens has called growing obesity â€” <a href="https://www.nhs.uk/news/obesity/obesity-and-inactivity-link-studied/">inextricably but complexly linked to inactivity</a> â€” â€œ<a href="https://www.england.nhs.uk/2014/09/serious-about-obesity/">a slow-motion car crash</a> in terms of avoidable illness and rising healthcare costs.â€</p>
<p>The direct cost to the NHS is <a href="https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/216370/dh_128210.pdf">well over Â£1 billion a year</a>, and wider economic costs from sickness and early death Â£6.5bn. Then there are costs as we live longer but in worse health â€” <a href="https://www.theguardian.com/society/2012/may/15/graph-doom-social-care-services-barnet">the Barnet â€œgraph of doomâ€</a> shows that within 10 years the rising cost of adult social care will leave the north London council with literally no money to spend on any other services (save statutory childrenâ€™s services).</p>
<p>But fitting exercise into already busy days is hard, which is where transport comes in â€” getting about under our own steam and taking advantage of the â€œ<a href="https://www.theguardian.com/environment/bike-blog/2017/sep/17/the-miracle-pill-how-cycling-could-save-the-nhs">miracle pill</a>â€ that is physical activity.</p>
<p>With the government focus for the past 60 years on the private car as the way to get about, itâ€™s no surprise that <a href="https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/633077/national-travel-survey-2016.pdf">62 per cent of trips and 78 per cent of distance travelled in Britain is by car</a>.</p>
<p>Over two thirds of journeys are shorter than five miles â€” a distance that, given the right conditions, could be easily cycled in less than half an hour. Yet more than seven in 10 journeys between one and five miles long <a href="https://www.gov.uk/government/statistical-data-sets/nts03-modal-comparisons#table-nts0308">are done by car</a>.</p>
<p>The domination of the car for even short journeys also provides the answer for why more people donâ€™t walk or cycle â€” it is unpleasant almost everywhere in Britain. <a href="https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/640297/british-social-attitudes-survey-2016.pdf">59 per cent of people think the roads are too dangerous for them to cycle on</a>. This is whatâ€™s known as subjective safety: the risk of being hurt is lower than perceived â€” though still far too high â€” but people feel unsafe and are put off.</p>
<p>Thankfully we know what the answer is: taking road space away from cars and providing protected cycleways, such as <a href="http://hackneycyclist.blogspot.co.uk/2016/06/the-new-east-west-cycle-superhighway-in.html">the ones that opened last year in central London</a>, <a href="http://spaceforgosforth.com/john-dobson-street/">John Dobson Street in Newcastle</a>, and <a href="https://www.cycling-embassy.org.uk/blog/2016/11/28/the-great-big-good-uk-cycling-infrastructure-roundup">bits and pieces in Brighton, Leicester and elsewhere</a>. Or the ones you see <a href="https://bicycledutch.wordpress.com/2017/03/14/rotterdam-ride/">everywhere in the Netherlands</a>.</p>
<p>We know they work and people like using them â€” bikes now make up <a href="https://www.standard.co.uk/news/transport/cyclists-make-up-70-of-blackfriars-bridge-traffic-a3409351.html">the majority of vehicles during rush hour on Blackfriars Bridge</a> in London, in just one lane of space. Or take <a href="https://lcc.org.uk//pages/seville-goes-dutch">Seville</a> in southern Spain, which built about 80 miles of protected cycleways and turned fewer than 5,000 cycle journeys a day in 2006 into 72,000 in 2012 â€” going from a 0.5 per cent share of trips to 7 per cent.</p>
<p>Cycleways turn bikes from a hobby for the fit and the brave into a quick, cheap and easy way to get around for everyone. In the Netherlands <a href="https://bicycledutch.wordpress.com/2013/12/05/arriving-at-school-by-bicycle/">three quarters of children cycle to school</a> â€” able to get around independently in complete safety.</p>
<p>The same applies for older people, where having an easy and safe way to get about keeps up peopleâ€™s health and decreases their <a href="https://www.nhs.uk/news/older-people/social-isolation-increases-death-risk-in-older-people/">social isolation</a>. The director of the Dutch Cyclistsâ€™ Union tells Peter Walker in his book <a href="https://www.penguin.co.uk/books/1113912/bike-nation/">Bike Nation</a> that while people tend to drive less from their mid-seventies as they feel less confident, they then cycle more. Not for nothing do people refer to the conditions as fit for <a href="https://bicycledutch.wordpress.com/2011/10/13/safe-cycling-for-8-to-80-year-olds/">8 to 80-year-olds</a> (and beyond).</p>
<p>For disabled people too, cycling can be a good way to travel independently as well as keeping healthy, as <a href="http://wheelsforwellbeing.org.uk">Wheels for Wellbeing</a> has made <a href="https://vimeo.com/235095500">crystal clear</a>. People with impaired mobility often find it easier than walking and many use a cycle as a mobility aid.</p>
<p>We must alter our streets before we can reap the benefits of this â€” the road layouts weâ€™ve inherited from the 1970s just donâ€™t cut it. As a nice bonus we can start to make our towns <a href="http://www.streetfilms.org/in-appreciation-of-the-new-times-square/">more pleasant places to be</a>, reclaiming space for people rather than cars.</p>
<p>Wonâ€™t this cause traffic chaos? No. You can move about <a href="https://www.cycling-embassy.org.uk/dictionary/capacity">seven times as many people on bikes as in cars</a> in the same amount of space, and reducing the space for cars <a href="http://rachelaldred.org/writing/thoughts/disappearing-traffic/">causes some of the traffic to evaporate</a>, instead of taking different roads.</p>
<p>Doing this is going to cost money â€” particularly if we adopt a national plan to make these benefits available in every community, as we should. But it will cost substantially less than building roads, <a href="https://www.robjwells.com/2016/12/roads-a-laypersons-guide/">as the government is doing</a> despite <a href="http://www.cpre.org.uk/resources/transport/roads/item/4543-the-end-of-the-road-challenging-the-road-building-consensus">the evidence against being clear</a> on all fronts. A mile of top-notch cycleway costs about <a href="http://therantyhighwayman.blogspot.co.uk/2016/04/cost-invest-value.html">Â£2-3 million</a>. Thatâ€™s <a href="http://therantyhighwayman.blogspot.co.uk/2016/04/cost-invest-value.html">26 times cheaper per mile than the M4 bypass and 79 times cheaper than Crossrail</a>.</p>
<p><a href="http://www.cyclinguk.org/press-release/2017-09-26/labour-pledge-spend-Â£10-head-annually-cycling-walking">Labourâ€™s pledge</a> to spend Â£10 per person per year on cycling infrastructure is a start â€” but it is just a start. The Netherlands already has a comprehensive network but still spends about Â£25 per head. Public health experts have long called for <a href="http://www.adph.org.uk/wp-content/uploads/2013/08/Take_action_on_active_travel_20104.pdf">10 per cent of transport budgets</a> to be immediately allocated to walking and cycling.</p>
<p>In the long run it could save us a good deal: <a href="https://www.itdp.org/a-global-high-shift-cycling-scenario/">$24 trillion worldwide by 2050</a> if just 14 per cent of urban journeys are done by bike by then â€” less than what is achieved today in the Netherlands and Denmark. That figure does not even include the money saved through improved health, which would be substantial.</p>
<p>And that is from cycling alone. The same <a href="https://www.itdp.org/a-global-high-shift-cycling-scenario/">UC Davis study</a> shows that cycling alongside improvements in public transport and a decline in private car use would save the world $128trn by 2050 in comparison to continuing as we are now.</p>
<p>Such a scenario would also halve the carbon emissions of the business-as-usual case, putting us firmly on track to avoid utterly catastrophic climate change.</p>
<p>Electric cars do have a role to play in our future â€” but we must be aware of the associated risks to our health and the environment of widespread private motor use, and choose a more ambitious path that can transform our communities for the better.</p>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2017/06/bye-bye-oreilly/">Bye bye Oâ€™Reilly</a></h2>
      <p><time datetime="2017-06-29T21:42">Thursday, June 29 2017</time></p>
    </header>
    <p>Itâ€™s a real shame that <a href="https://www.oreilly.com/ideas/were-reinventing-too">Oâ€™Reilly have now closed their store</a> and are now only making their books available to people who subscribe to their Safari service or buy worse versions from Amazon.</p>
<p>Over the past four-ish years Iâ€™ve spent roughly $250 on Oâ€™Reilly books, and theyâ€™ve been a great way to learn new technical topics. <a href="http://shop.oreilly.com/product/0636920023494.do">Learning Web Design by Jennifer Robbins</a> made something Iâ€™d previously found intimidating into a straightforward and enjoyable endeavour. Earlier this year I spent some time learning SQL with the <a href="http://shop.oreilly.com/product/9780596526849.do">Head First SQL book by Lynn Beighley</a> and really enjoyed it. At the moment Iâ€™m reading <a href="http://shop.oreilly.com/product/0636920028154.do">Mark Lutzâ€™s Learning Python</a> â€” starting from the basics and working through what is quite a thick book (1,600 pages!) to improve my Python skills and make sure Iâ€™ve got the fundamentals nailed down.</p>
<p>Theyâ€™re all great. I love the PDF versions as theyâ€™re incredibly well-typeset and fit perfectly on an iPad screen. Itâ€™s been nice to learn in the garden, at the kitchen table, in bed â€” all much more comfortable than sitting at my desk. And theyâ€™ve been updated repeatedly since I bought them to fix typos and other errors â€” the <a href="http://www.oreilly.com/catalog/errata.csp?isbn=0636920028154">Learning Python errata page</a> lists nearly 170 entries and the book has been updated 15 times since the publication of the third edition in June 2013, most recently this April.</p>
<p>The thing is, Iâ€™ve bought these books at various times over the past few years and generally only dipped into them to start and then come back later. Working through one will generally take me several weeks or even months. This is perhaps my third crack at Learning Python â€” not because itâ€™s bad (itâ€™s great!) but because I already knew enough Python to be dangerous and getting through the earlier sections took time and patience that Iâ€™ve not had until now.</p>
<p>This is not something that the Safari subscription allows for â€” particularly when as an individual and a hobbyist programmer I cannot begin to justify the $400 a year price. Itâ€™s another world to buying a $40 ebook so you can learn a particular topic or skill.</p>
<p>And what of reference books and cookbooks? I own both the <a href="http://shop.oreilly.com/product/0636920028338.do">Python Pocket Reference</a> and the <a href="http://shop.oreilly.com/product/0636920027072.do">Python Cookbook</a> â€” PDFs that I can dip into at any time and together wouldâ€™ve been just $52 at full price.</p>
<p>You can still buy paper and Kindle versions of Oâ€™Reilly books through Amazon, but the PDFs are gone. Buying weighty print books on programming topics is not something I want to do â€” although <a href="http://shop.oreilly.com/product/9780596805531.do">JavaScript: The Definitive Guide, Sixth Edition</a> and <a href="http://www.peachpit.com/store/apple-training-series-applescript-1-2-3-9780321149312">AppleScript 1-2-3</a> serve well lifting my iMac up 4â€³. And the Kindle versions share the typesetting problems of Oâ€™Reillyâ€™s ePub versions (now also unavailable to purchase) and introduce Amazonâ€™s DRM restrictions.</p>
<p>The tagline on the Oâ€™Reilly homepage is â€œSafari is how you learn.â€ It makes me feel a bit crap, frankly, as I canâ€™t afford a Safari subscription (nor could I justify it if I could) and I donâ€™t want to buy an inferior product from a third party.</p>
<p>Sadly that means I wonâ€™t be able to learn from Oâ€™Reilly books in the future<a href="https://www.youtube.com/watch?v=8c1hYO_BYHY">.</a></p>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2017/05/hop-aboard-the-r-train/">Hop aboard the R train</a></h2>
      <p><time datetime="2017-05-21T16:27">Sunday, May 21 2017</time></p>
    </header>
    <p>I quite enjoy turning out little plots for posts on here. Admittedly Iâ€™m not great at it, but I like to have a go.</p>
<p>However, <a href="https://matplotlib.org">matplotlib</a> really is not my favourite. It feels like thereâ€™s a lot of boilerplate to write and a lot of work to do before you get make something reasonably approaching what you had envisioned in your head.</p>
<p>So I thought Iâ€™d give <a href="https://www.r-project.org">R</a> a try, and learn some things about visualisation along the way with <a href="http://vissoc.co">Kieran Healeyâ€™s data visualisation course notes</a>, which was fun.</p>
<p>But mostly in this post I wanted to show how ludicrously straightforward using <a href="http://ggplot2.tidyverse.org">ggplot2</a> can be compared with what you have to do in matplotlib. Letâ€™s pick on <a href="https://www.robjwells.com/2016/12/trains-home-and-away/">my plot of train ticket prices</a> from just before Christmas.</p>
<p>The Python code for that is quite long so Iâ€™m not going to include it, but <a href="https://github.com/robjwells/primaryunit/blob/master/posts/2016/12/2016-12-23-trains/plot_trains.py">it is available to view online</a>. Iâ€™m not being completely fair because part of that involves getting the data into shape, and Iâ€™m sure thereâ€™s things I couldâ€™ve done to cut out a few lines.</p>
<p>That said, it took me a while to figure out exactly how to go about doing the plot in matplotlib, exactly how to, say, parse the dates and label the axis.</p>
<p>There was some of that with R and ggplot2, but mostly me looking things up in the documentation as Iâ€™ve not used them much. But mostly it was pretty straightforward to figure out how to build up the plot.</p>
<p>Anyway, hereâ€™s the plot:</p>
<p class="full-width">
    <a href="/images/2017-05-21-r-trains.svg">
        <img alt="A chart showing single train fares for selected journeys in England, France, Germany and the Netherlands on Friday December 23. This plot was made with R and ggplot2 instead of matplotlib."
             src="/images/2017-05-21-r-trains.svg"
             class="no-border"
             width=720>
    </a>
</p>

<p>And hereâ€™s the code that produced it:</p>
<pre><code>library(ggplot2)

# Read in and convert string times to datetimes
trains &lt;- read.csv('collected.csv')
trains$Time &lt;- as.POSIXct(trains$Time, format = '%Y-%m-%dT%H:%M:%S')

# Get the data onto the plot
p &lt;- ggplot(trains, aes(x = Time, y = Cost))

# 'Reveal' the data with points and show the
# East Mids price trend with a smoother
completed &lt;- p + geom_point(aes(color = Operator)) +
  geom_smooth(data = subset(trains, Operator == 'East Midlands Trains'),
              aes(group = Operator, color = Operator),
              method = 'loess', se = FALSE,
              size = 0.75, show.legend = FALSE) +

  # Let's adjust the scales
  scale_x_datetime(date_breaks = '1 hour',
                   date_labels = '%H:%M') +
  scale_y_continuous(limits = c(0, 100),
                     breaks = seq(10, 100, 10),
                     expand = c(0, 0)) +

  # Set some labels and adjust the look
  labs(title = paste('Cost of single train tickets',
                     'leaving European\ncapital cities',
                     'on Friday December 23 2016'),
       y = 'Ticket cost (â‚¬)',
       color = 'Train operator') +
  theme_bw(base_family = 'Trebuchet MS') +
  theme(plot.title = element_text(hjust = 0.5))

ggsave('plot.svg', plot = completed, device = 'svg',
     width = 8, height = 4, units = 'in')</code></pre>


<p>Iâ€™m still figuring things out with R and ggplot so Iâ€™m not exactly blazing through. (I still havenâ€™t figured out how to export transparent SVGs without editing them by hand.)</p>
<p>But I love the way that plots are built up out of individual pieces, which makes far more sense to me than trying to wrangle matplotlibâ€™s figures and axes.</p>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2017/05/json-feed/">JSON Feed</a></h2>
      <p><time datetime="2017-05-20T00:02">Saturday, May 20 2017</time></p>
    </header>
    <p>I added support for <a href="https://jsonfeed.org">JSON Feed</a> to my homemade static site generator <a href="https://github.com/robjwells/majestic">Majestic</a> today, and thought Iâ€™d note it because funnily enough the two implementations <a href="https://daringfireball.net/linked/2017/05/19/json-feed-jekyll">mentioned by John Gruber</a> (by <a href="https://github.com/hafniatimes/hafniatimes.github.io/blob/master/_layouts/jsonfeed.html">Niclas Darville</a> and <a href="https://github.com/jmacdotorg/plerd/blob/master/templates/jsonfeed.tt">Jason McIntosh</a>) used the approach Iâ€™d taken for <a href="https://github.com/robjwells/majestic/blob/master/majestic/default_templates/majestic-rss.xml">generating my RSS feed</a> and wanted to avoid.</p>
<p>Basically all three of those define a document template and pass in the posts and other required bits, and youâ€™re done. Iâ€™m really not knocking this â€” again, I do this with the RSS feed and it validates fine. Itâ€™s all good.</p>
<p>But I ended up templating my RSS feed like this because I looked at the <a href="https://pypi.python.org/pypi/feedgenerator/1.9">feedgenerator</a> module and ran away. Majestic was my first Python project of any real size and I wanted to keep things as straightforward as I could. While it looks (with hindsight) <a href="https://github.com/getpelican/pelican/blob/master/pelican/writers.py">reasonably OK in use</a>, it doesnâ€™t have any documentation, has been pulled out of Django, and has funky class names (<code>Rss201rev2Feed</code>) that didnâ€™t fill me with confidence that I could implement an RSS feed quickly.</p>
<p>I was using <a href="http://jinja.pocoo.org">Jinja</a> templating for the site and since HTML and XML are cousins just did that. But you can probably tell that I didnâ€™t really know what Iâ€™m doing (still donâ€™t!) with escaping as any field that might contain non-Ascii characters is wrapped in <code>&lt;![CDATA[â€¦]]&gt;</code> tags.</p>
<p>But hey, it works. Feedâ€™s valid.</p>
<p>With JSON, everything just feels much more obvious. In Python you hand off basic types to the built-in <a href="https://docs.python.org/3/library/json.html">json</a> module and you get back a string, all the encoding taken care of. And if I make a mistake Python will complain at me, instead of just dumping out a file of questionable worth.</p>
<p>I think this is what all the people complaining on the Hacker News thread missed. Working in JSON is comfortable and familiar â€” the tools are good and you get told when something goes wrong. Working with XML can be unclear and a bit of a pain, and creating an invalid document is a risk.</p>
<p>So my super-duper advanced JSON Feed implementation isâ€¦ constructing a <code>dict</code>, adding things to it and passing it off to the json module that I use <em>all the time</em>. Taken care of. The codeâ€™s so boring Iâ€™m not even going to include it here (but <a href="https://github.com/robjwells/majestic/blob/d88aabba2dc0059814955802408fb46dc452c0de/majestic/collections.py#L130">itâ€™s online to view</a>).</p>
  </article>
  <div class="pagination">
<p class="pagination-older"><a href="https://robjwells.github.io/page-4/">Older posts</a></p><p class="pagination-newer"><a href="https://robjwells.github.io/page-2/">Newer posts</a></p>  </div>

</main>

<footer class="site-footer">
  <small class="mute-links">
    This work is licensed under a
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License</a>.
  </small>
</footer> <!-- .site-footer -->

</div> <!-- .wrapper -->

</body>

</html>