<!doctype html><html lang=en><head><title>Primary Unit – Table manipulation with R</title><meta charset=utf-8><meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; media-src 'self'; block-all-mixed-content; base-uri 'self'"><link rel=license href=https://creativecommons.org/licenses/by/4.0/><link rel=alternate type=application/rss+xml href=/rss.xml title="Primary Unit"><link rel=alternate type=application/json href=/feed.json title="Primary Unit"><link rel=mask-icon href=/favicon.svg color=#1369bf><link rel=apple-touch-icon-precomposed href=/favicon.png><link rel=icon href=/favicon.ico><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A blog by Rob Wells, mostly about computer stuff."><style>html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strong,sub,sup,var,b,u,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,menu,nav,output,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}input,button{font-family:inherit}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}html{box-sizing:border-box;text-size-adjust:100%}*,*:before,*:after{box-sizing:inherit}:root{--grey:#607080;--grey10:#eff0f2;--grey5:#f7f8f9;--blue:#1369bf;--blue10:#e7eff8;--purple:#7436b3;--lineSpace:1.75rem;--halfLine:calc(var(--lineSpace) / 2);--quarterLine:calc(var(--lineSpace) / 4);--bigGap:calc(var(--lineSpace) * 2);--paragraphWidth:40rem;--wrapperWidth:50rem;--huge:1.75rem;--big:1.5625rem;--medium:1.375rem;--text:1.125rem;--small:0.875rem;--codeInText:0.875em;--bodyFonts:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Oxygen", Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Helvetica, sans-serif;--monospace:'Source Code Pro', 'Consolas', 'Menlo', 'Monaco', monospace}body{background-color:var(--grey5);font-family:var(--bodyFonts);font-size:var(--text);font-style:normal;font-weight:400;line-height:1.55555;text-size-adjust:100%;-webkit-text-size-adjust:100%}.wrapper{margin:0 auto;max-width:var(--wrapperWidth);padding:var(--lineSpace)var(--halfLine)}h2,h3,h4{margin:0 0 var(--lineSpace)}h2{font-size:var(--huge)}h3{font-size:var(--big)}h4{font-size:var(--medium)}blockquote,figure,p,pre,table,caption,dl,ol,ul,div.highlight{margin-bottom:var(--lineSpace)}blockquote,pre,div.highlight{background-color:var(--grey10);padding:var(--halfLine)}blockquote{font-style:italic}blockquote em,blockquote i{font-style:normal}blockquote p:last-child{margin-bottom:0}figcaption{font-style:italic}hr{border:none;border-top:1px solid var(--grey);margin:var(--lineSpace)0}img,video{box-sizing:content-box;border:1px solid var(--grey);height:auto;max-width:100%}pre{overflow-x:auto}dl,ol,ul{margin-bottom:var(--lineSpace)}ol,ul{list-style-position:outside;padding-left:var(--lineSpace)}ol{list-style-type:decimal}ul{list-style-type:square}a:link{color:var(--blue);text-decoration:underline}a:visited{color:var(--purple)}a:focus,a:hover,a:active{background-color:var(--blue10)}strong,b{font-weight:700}em,i{font-style:italic}code{font-size:var(--codeInText)}.highlight,pre code,small{font-size:var(--small)}.highlight,code{font-family:var(--monospace)}small{color:var(--grey)}table{width:100%}.table-container{overflow-x:auto}caption{font-style:italic}thead{border-bottom:1px solid var(--grey)}tfoot{border-top:1px solid var(--grey)}th,td{width:auto;padding:var(--halfLine);overflow:auto;text-align:left}th{background-color:var(--grey10);font-weight:700}.table-figures{text-align:right;font-family:var(--monospace)}.site-header{border-left:var(--quarterLine)solid var(--blue);display:flex;flex-wrap:wrap;margin-bottom:var(--lineSpace);padding-left:var(--quarterLine)}.site-title-container{flex-shrink:0;margin-right:var(--lineSpace);max-width:100%}.site-title{font-size:var(--huge);line-height:var(--huge);margin-bottom:0}.site-byline{margin-bottom:0}.site-links{color:var(--grey);list-style-type:none;margin-bottom:0;padding:0}.site-footer{margin-top:var(--bigGap)}article{border-bottom:1px solid var(--grey);margin-bottom:var(--bigGap)}article:last-of-type{border-bottom:none}article header{margin-bottom:var(--lineSpace)}article header h2{margin-bottom:0}article header time{color:var(--grey)}article li{margin-bottom:var(--halfLine)}.index-date{color:var(--grey);font-family:var(--monospace);font-size:var(--small);min-width:6rem;margin-right:var(--halfLine)}.index-item{margin-bottom:var(--halfLine)}.index-link{align-items:baseline;display:flex}.index-list{padding-left:0;list-style-type:none}.flag{background-color:var(--blue10);border-left:var(--quarterLine)solid var(--blue);margin-bottom:var(--lineSpace);padding:var(--halfLine)var(--quarterLine)}.flag :last-child{margin-bottom:0}.full-width{max-width:100%}.mute-links a{text-decoration:none;color:inherit}.no-border{border:0}.no-border img{border:0}.no-squish{overflow:auto}.no-squish img{max-width:none}@media screen and (min-width:40rem){.pull-left{float:left;clear:left;margin-right:var(--halfLine)}.pull-right{float:right;clear:right;margin-left:var(--halfLine)}.pull-left img,.pull-right img{display:block;margin-bottom:var(--lineSpace)}}</style><style>div.highlight>pre.chroma{padding:0;margin:0}:root{--lineNumberGrey:#6D6D6D;--operatorOrange:#B45000;--stringGreen:#357D06}.chroma .x{color:#000}.chroma .err{color:#a40000}.chroma .ln{margin-right:var(--halfLine);padding:0;color:var(--lineNumberGrey)}.chroma .k{color:#204a87;font-weight:700}.chroma .kc{color:#204a87;font-weight:700}.chroma .kd{color:#204a87;font-weight:700}.chroma .kn{color:#204a87;font-weight:700}.chroma .kp{color:#204a87;font-weight:700}.chroma .kr{color:#204a87;font-weight:700}.chroma .kt{color:#204a87;font-weight:700}.chroma .n{color:#000}.chroma .na{color:#c4a000}.chroma .nb{color:#204a87}.chroma .bp{color:#3465a4}.chroma .nc{color:#000}.chroma .no{color:#000}.chroma .nd{color:#5c35cc;font-weight:700}.chroma .ni{color:var(--operatorOrange)}.chroma .ne{color:#c00;font-weight:700}.chroma .nf{color:#000}.chroma .fm{color:#000}.chroma .nl{color:#f57900}.chroma .nn{color:#000}.chroma .nx{color:#000}.chroma .py{color:#000}.chroma .nt{color:#204a87;font-weight:700}.chroma .nv{color:#000}.chroma .vc{color:#000}.chroma .vg{color:#000}.chroma .vi{color:#000}.chroma .vm{color:#000}.chroma .l{color:#000}.chroma .ld{color:#000}.chroma .s{color:var(--stringGreen)}.chroma .sa{color:var(--stringGreen)}.chroma .sb{color:var(--stringGreen)}.chroma .sc{color:var(--stringGreen)}.chroma .dl{color:var(--stringGreen)}.chroma .sd{color:#8f5902;font-style:italic}.chroma .s2{color:var(--stringGreen)}.chroma .se{color:var(--stringGreen)}.chroma .sh{color:var(--stringGreen)}.chroma .si{color:var(--stringGreen)}.chroma .sx{color:var(--stringGreen)}.chroma .sr{color:var(--stringGreen)}.chroma .s1{color:var(--stringGreen)}.chroma .ss{color:var(--stringGreen)}.chroma .m{color:#0000cf;font-weight:700}.chroma .mb{color:#0000cf;font-weight:700}.chroma .mf{color:#0000cf;font-weight:700}.chroma .mh{color:#0000cf;font-weight:700}.chroma .mi{color:#0000cf;font-weight:700}.chroma .il{color:#0000cf;font-weight:700}.chroma .mo{color:#0000cf;font-weight:700}.chroma .o{color:var(--operatorOrange);font-weight:700}.chroma .ow{color:#204a87;font-weight:700}.chroma .p{color:#000;font-weight:700}.chroma .c{color:#8f5902;font-style:italic}.chroma .ch{color:#8f5902;font-style:italic}.chroma .cm{color:#8f5902;font-style:italic}.chroma .c1{color:#8f5902;font-style:italic}.chroma .cs{color:#8f5902;font-style:italic}.chroma .cp{color:#8f5902;font-style:italic}.chroma .cpf{color:#8f5902;font-style:italic}.chroma .g{color:#000}.chroma .gd{color:#a40000}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#ef2929}.chroma .gh{color:navy;font-weight:700}.chroma .gi{color:#00a000}.chroma .go{color:#000;font-style:italic}.chroma .gp{color:#8f5902}.chroma .gs{color:#000;font-weight:700}.chroma .gu{color:purple;font-weight:700}.chroma .gt{color:#a40000;font-weight:700}.chroma .gl{color:#000;text-decoration:underline}.chroma .w{color:#f8f8f8;text-decoration:none}</style></head><body><div class=wrapper><header class=site-header><div class="site-title-container mute-links"><h1 class=site-title><a href=/>Primary Unit</a></h1><p class=site-byline><i>by</i> Rob Wells</p></div><nav id=site-nav><ul class="site-links mute-links"><li><a href=/about/>About</a></li><li><a href=/books/>Books I’ve read</a></li><li>Feed:
<a href=/feed.json>JSON</a>,
<a href=/rss.xml>RSS</a></li></ul></nav></header><main><article><header><h2 class=mute-links><a href=/2018/05/table-manipulation-with-r/>Table manipulation with R</a></h2><p><time datetime=2018-05-08T23:15:00+0000>Tuesday, May 8 2018</time></p></header><p>One of my responsibilities at work is to provide a list of people who our printers should call if there’s ever a problem with the edition. Usually that’s the chief sub, or whoever is covering her.</p><p>I also prepare the rota for the journalistic staff, which I use as the source of information for the responsibility list.</p><p>This job has largely escaped automation. I do have a Python script that prints a nice template report for the week ahead, complete with BBEdit placeholders, but working out whose name should be attached to each edition is just done by reading the rota across and deleting names from the template list until you’re down to one.</p><p>However, I’ve found things of this nature, if not automated, are put off, forgotten, or done wrong. This, because it’s not actually vital to anything, is no exception, particularly when I’m pulled into jobs that actually are vital.</p><p>The report looks a little like this, so you get the idea:</p><pre><code>Tue May 08    16pp    Alice Jones
Wed May 09    16pp    Bob Smith
Thu May 10    16pp    Rob Wells
</code></pre><p>And so on, with the pagination in the middle column.</p><p>The pagination is consistent (16 in the week, 24 on the weekend) with occasional larger editions. It can either be predicted with total certainty or none at all, as the large editions vary considerably with advertising and feature articles.</p><p>The responsibility can’t be predicted because we don’t work fixed patterns (we don’t have enough staff to do so). However, it can be done in advance once the newsroom rota is completed.</p><p>So let’s forget the pagination and just focus on pulling together a list of every production day in the completed period and who is the chief sub.</p><p>Our newsroom rota is just a spreadsheet, which is actually the best tool I’ve found so far for handling a couple dozen people with intricate job-cover links between them. (The rota used to be laid out in InDesign, which, no matter what you think about spreadsheets or InDesign, was much more difficult.)</p><p>It looks a bit like this (the real spreadsheet has proper formatting and so on):</p><div class=table-container><table><thead><tr><th></th><th>Sun 6/5</th><th>Mon 7/5</th><th>Tue 8/5</th><th>Wed 9/5</th><th>Thu 10/5</th><th>Fri 11/5</th><th>Sat 12/5</th><th>Lieu add</th><th>Lieu tot</th></tr></thead><tbody><tr><td>Rob Wells</td><td>Off</td><td></td><td></td><td>Sport</td><td>Ch Sub</td><td>Sport</td><td></td><td></td><td>10</td></tr><tr><td>Alice Jones</td><td></td><td></td><td></td><td></td><td>Off</td><td></td><td></td><td>0.25</td><td>4.5</td></tr></tbody></table></div><p>There’s a fair amount of information: names, dates, days off, cover responsibilities, new and accrued <a href=https://www.gov.uk/overtime-your-rights/time-off-and-paid-leave>TOIL</a>. It’s entirely designed for humans, not computers (and it takes the humans a little while until they’re able to read it).</p><p>A lot is implicit. If we assume in this example that Alice is the chief sub, she is performing that role on her usual working days (the empty cells). It is only marked for people who have to cover someone else’s job.</p><p>This table is not something that you can just chuck into a computer program; it needs cleaning up first.</p><p>Thankfully, R (and the <a href=https://www.tidyverse.org>Tidyverse</a> particularly) is a great environment in which to wrangle your data, and to do so fairly quickly. All the code below was pulled together in about 30 minutes total (with a good 10 minutes of reading documentation and fixing errors in the original source data). Writing this post has taken much longer.</p><p>In our example below we’re going to have four workers who each cover the chief sub at different times. Here we’re going make “Dan Taylor” the chief sub. Congratulations, Dan!</p><p>First we’ll pull in our libraries.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=nf>library</span><span class=p>(</span><span class=n>tidyverse</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>library</span><span class=p>(</span><span class=n>lubridate</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>library</span><span class=p>(</span><span class=n>stringr</span><span class=p>)</span>
</span></span></code></pre></div><p>Then we’ll read in the data, which is saved in a TSV file after copying and pasting from the spreadsheet into a text document. We’ll select only the production days and the unnamed first column (named X1 on import), excluding Saturdays and the TOIL columns.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>wide</span> <span class=o>&lt;-</span> <span class=nf>read_tsv</span><span class=p>(</span><span class=s>&#39;chsub.tsv&#39;</span><span class=p>)</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>select</span><span class=p>(</span><span class=nf>matches</span><span class=p>(</span><span class=s>&#39;^(Mon|Tue|Wed|Thu|Fri|Sun) |X1&#39;</span><span class=p>))</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>rename</span><span class=p>(</span><span class=n>name</span> <span class=o>=</span> <span class=n>X1</span><span class=p>)</span>
</span></span></code></pre></div><p>Then we’ll use a <a href=http://tidyr.tidyverse.org>tidyr</a> function, <a href=http://tidyr.tidyverse.org/reference/gather.html><code>gather()</code></a>, to transform our wide format into a tall one by selecting the date columns. It’s easier to get a feel for <code>gather()</code> by looking at the output.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>tidy</span> <span class=o>&lt;-</span> <span class=n>wide</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>gather</span><span class=p>(</span><span class=nf>matches</span><span class=p>(</span><span class=s>&#39;^(Mon|Tue|Wed|Thu|Fri|Sun) &#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>           <span class=n>key</span> <span class=o>=</span> <span class=n>date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=n>value</span> <span class=o>=</span> <span class=n>status</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>head</span><span class=p>(</span><span class=n>tidy</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>## # A tibble: 6 x 3
##   name           date     status
##   &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;
## 1 Alice Jones    Sun 29/4 Off
## 2 Bob Smith      Sun 29/4 Sick
## 3 Carol Williams Sun 29/4 Booked
## 4 Dan Taylor     Sun 29/4 &lt;NA&gt;
## 5 Alice Jones    Mon 30/4 &lt;NA&gt;
## 6 Bob Smith      Mon 30/4 Off
</code></pre><p>We now have a row for each person for each day, along with their “status” for the day.</p><p>But Dan doesn’t have his chief sub days marked, as it would be nearly every day. Let’s split out Dan’s rows and replace the empty cells with <code>Ch Sub</code>, the same status string used by everyone else. Then we’ll combine the filled-out Dan rows with all the non-Dan rows from the original data frame.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>dan_replaced</span> <span class=o>&lt;-</span> <span class=n>tidy</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>filter</span><span class=p>(</span><span class=n>name</span> <span class=o>==</span> <span class=s>&#39;Dan Taylor&#39;</span><span class=p>)</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>replace_na</span><span class=p>(</span><span class=nf>list</span><span class=p>(</span><span class=n>status</span> <span class=o>=</span> <span class=s>&#39;Ch Sub&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>all</span> <span class=o>&lt;-</span> <span class=n>tidy</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>filter</span><span class=p>(</span><span class=n>name</span> <span class=o>!=</span> <span class=s>&#39;Dan Taylor&#39;</span><span class=p>)</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>rbind</span><span class=p>(</span><span class=n>dan_replaced</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>tail</span><span class=p>(</span><span class=n>all</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>## # A tibble: 6 x 3
##   name       date      status
##   &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;
## 1 Dan Taylor Sun 30/12 Ch Sub
## 2 Dan Taylor Mon 31/12 Ch Sub
## 3 Dan Taylor Tue 1/1   Ch Sub
## 4 Dan Taylor Wed 2/1   Ch Sub
## 5 Dan Taylor Thu 3/1   Ch Sub
## 6 Dan Taylor Fri 4/1   Ch Sub
</code></pre><p>Great. But poor Dan, he’s working every day over New Year 2018-2019. In reality, I haven’t done that far on the rota, just up to October. We’ll convert all those dates now, and filter out all the newly missing entries where the month was outside our range.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>dated</span> <span class=o>&lt;-</span> <span class=n>all</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>mutate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>date</span> <span class=o>=</span> <span class=nf>dmy</span><span class=p>(</span><span class=nf>str_c</span><span class=p>(</span><span class=nf>str_extract</span><span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=s>&#39;\\d+/[4-9]&#39;</span><span class=p>),</span> <span class=s>&#39;/2018&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>filter</span><span class=p>(</span><span class=o>!</span><span class=nf>is.na</span><span class=p>(</span><span class=n>date</span><span class=p>))</span>
</span></span></code></pre></div><p>Let’s get only the chief sub-related rows and sort them by date.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>chsub</span> <span class=o>&lt;-</span> <span class=n>dated</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>filter</span><span class=p>(</span><span class=nf>str_detect</span><span class=p>(</span><span class=n>status</span><span class=p>,</span> <span class=s>&#39;Ch Sub&#39;</span><span class=p>))</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>arrange</span><span class=p>(</span><span class=n>date</span><span class=p>)</span> <span class=o>%&gt;%</span>
</span></span><span class=line><span class=cl>    <span class=nf>select</span><span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=n>chief_sub</span> <span class=o>=</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>head</span><span class=p>(</span><span class=n>chsub</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>## # A tibble: 6 x 2
##   date       chief_sub
##   &lt;date&gt;     &lt;chr&gt;
## 1 2018-04-29 Dan Taylor
## 2 2018-04-30 Dan Taylor
## 3 2018-05-01 Dan Taylor
## 4 2018-05-02 Bob Smith
## 5 2018-05-03 Dan Taylor
## 6 2018-05-04 Carol Williams
</code></pre><p>Exactly what we want. Now time for a bit of formatting to make this giant list somewhat acceptable for other people. This is also where my knowledge of R runs out.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>formatted</span> <span class=o>&lt;-</span> <span class=nf>str_c</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nf>format</span><span class=p>(</span><span class=n>chsub</span><span class=o>$</span><span class=n>date</span><span class=p>,</span> <span class=s>&#39;%a %Y-%m-%d&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>           <span class=n>chsub</span><span class=o>$</span><span class=n>chief_sub</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=n>sep</span> <span class=o>=</span> <span class=s>&#39;  &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fd</span> <span class=o>&lt;-</span> <span class=nf>file</span><span class=p>(</span><span class=s>&#39;output.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>writeLines</span><span class=p>(</span><span class=n>formatted</span><span class=p>,</span> <span class=n>fd</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>close</span><span class=p>(</span><span class=n>fd</span><span class=p>)</span>
</span></span></code></pre></div><p>So we’ll switch to Python, printing a blank line between each production week (of six days).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;output.txt&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>idx</span><span class=p>,</span> <span class=n>line</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>readlines</span><span class=p>()):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>idx</span> <span class=o>%</span> <span class=mi>6</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span></code></pre></div><pre tabindex=0><code>Sun 2018-08-19  Carol Williams
Mon 2018-08-20  Carol Williams
Tue 2018-08-21  Alice Jones
Wed 2018-08-22  Carol Williams
Thu 2018-08-23  Carol Williams
Fri 2018-08-24  Carol Williams

Sun 2018-08-26  Carol Williams
Mon 2018-08-27  Carol Williams
Tue 2018-08-28  Carol Williams
Wed 2018-08-29  Dan Taylor
Thu 2018-08-30  Dan Taylor
Fri 2018-08-31  Dan Taylor
</code></pre><p>Perfect. And ready for whenever I get time to update the rota again.</p></article></main><footer class=site-footer><small class=mute-links>This work is licensed under a
<a rel=license href=https://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a>.</small></footer></div></body></html>