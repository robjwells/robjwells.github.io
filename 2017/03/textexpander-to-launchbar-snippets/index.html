<!doctype html><html lang=en>
<head>
<title>Primary Unit – TextExpander to LaunchBar snippets</title>
<meta charset=utf-8>
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; media-src 'self'; block-all-mixed-content; base-uri 'self'">
<link rel=license href=https://creativecommons.org/licenses/by/4.0/>
<link rel=alternate type=application/rss+xml href=/rss.xml title="Primary Unit">
<link rel=alternate type=application/json href=/feed.json title="Primary Unit">
<link rel=mask-icon href=/favicon.svg color=#1369bf>
<link rel=apple-touch-icon-precomposed href=/favicon.png>
<link rel=icon href=/favicon.ico>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="A blog by Rob Wells, mostly about computer stuff.">
<style>html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strong,sub,sup,var,b,u,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,menu,nav,output,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}input,button{font-family:inherit}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}html{box-sizing:border-box;text-size-adjust:100%}*,*:before,*:after{box-sizing:inherit}:root{--grey:#607080;--grey10:#eff0f2;--grey5:#f7f8f9;--blue:#1369bf;--blue10:#e7eff8;--purple:#7436b3;--lineSpace:1.75rem;--halfLine:calc(var(--lineSpace) / 2);--quarterLine:calc(var(--lineSpace) / 4);--bigGap:calc(var(--lineSpace) * 2);--paragraphWidth:40rem;--wrapperWidth:50rem;--huge:1.75rem;--big:1.5625rem;--medium:1.375rem;--text:1.125rem;--small:0.875rem;--codeInText:0.875em;--bodyFonts:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Oxygen", Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Helvetica, sans-serif;--monospace:'Source Code Pro', 'Consolas', 'Menlo', 'Monaco', monospace}body{background-color:var(--grey5);font-family:var(--bodyFonts);font-size:var(--text);font-style:normal;font-weight:400;line-height:1.55555;text-size-adjust:100%;-webkit-text-size-adjust:100%}.wrapper{margin:0 auto;max-width:var(--wrapperWidth);padding:var(--lineSpace)var(--halfLine)}h2,h3,h4{margin:0 0 var(--lineSpace)}h2{font-size:var(--huge)}h3{font-size:var(--big)}h4{font-size:var(--medium)}blockquote,figure,p,pre,table,caption,dl,ol,ul,div.highlight{margin-bottom:var(--lineSpace)}blockquote,pre,div.highlight{background-color:var(--grey10);padding:var(--halfLine)}blockquote{font-style:italic}blockquote em,blockquote i{font-style:normal}blockquote p:last-child{margin-bottom:0}figcaption{font-style:italic}hr{border:none;border-top:1px solid var(--grey);margin:var(--lineSpace)0}img,video{box-sizing:content-box;border:1px solid var(--grey);height:auto;max-width:100%}pre{overflow-x:auto}dl,ol,ul{margin-bottom:var(--lineSpace)}ol,ul{list-style-position:outside;padding-left:var(--lineSpace)}ol{list-style-type:decimal}ul{list-style-type:square}a:link{color:var(--blue);text-decoration:underline}a:visited{color:var(--purple)}a:focus,a:hover,a:active{background-color:var(--blue10)}strong,b{font-weight:700}em,i{font-style:italic}code{font-size:var(--codeInText)}.highlight,pre code,small{font-size:var(--small)}.highlight,code{font-family:var(--monospace)}small{color:var(--grey)}table{width:100%}.table-container{overflow-x:auto}caption{font-style:italic}thead{border-bottom:1px solid var(--grey)}tfoot{border-top:1px solid var(--grey)}th,td{width:auto;padding:var(--halfLine);overflow:auto;text-align:left}th{background-color:var(--grey10);font-weight:700}.table-figures{text-align:right;font-family:var(--monospace)}.site-header{border-left:var(--quarterLine)solid var(--blue);display:flex;flex-wrap:wrap;margin-bottom:var(--lineSpace);padding-left:var(--quarterLine)}.site-title-container{flex-shrink:0;margin-right:var(--lineSpace);max-width:100%}.site-title{font-size:var(--huge);line-height:var(--huge);margin-bottom:0}.site-byline{margin-bottom:0}.site-links{color:var(--grey);list-style-type:none;margin-bottom:0;padding:0}.site-footer{margin-top:var(--bigGap)}article{border-bottom:1px solid var(--grey);margin-bottom:var(--bigGap)}article:last-of-type{border-bottom:none}article header{margin-bottom:var(--lineSpace)}article header h2{margin-bottom:0}article header time{color:var(--grey)}article p{max-width:var(--paragraphWidth)}article li{margin-bottom:var(--halfLine);max-width:calc(var(--paragraphWidth) - var(--lineSpace))}.index-date{color:var(--grey);font-family:var(--monospace);font-size:var(--small);min-width:6rem;margin-right:var(--halfLine)}.index-item{margin-bottom:var(--halfLine)}.index-link{align-items:baseline;display:flex}.index-list{padding-left:0;list-style-type:none}.flag{background-color:var(--blue10);border-left:var(--quarterLine)solid var(--blue);margin-bottom:var(--lineSpace);padding:var(--halfLine)var(--quarterLine)}.flag :last-child{margin-bottom:0}.full-width{max-width:100%}.mute-links a{text-decoration:none;color:inherit}.no-border{border:0}.no-border img{border:0}.no-squish{overflow:auto}.no-squish img{max-width:none}@media screen and (min-width:40rem){.pull-left{float:left;clear:left;margin-right:var(--halfLine)}.pull-right{float:right;clear:right;margin-left:var(--halfLine)}.pull-left img,.pull-right img{display:block;margin-bottom:var(--lineSpace)}}</style>
<style>div.highlight>pre.chroma{padding:0;margin:0}:root{--lineNumberGrey:#6D6D6D;--operatorOrange:#B45000;--stringGreen:#357D06}.chroma .x{color:#000}.chroma .err{color:#a40000}.chroma .ln{margin-right:var(--halfLine);padding:0;color:var(--lineNumberGrey)}.chroma .k{color:#204a87;font-weight:700}.chroma .kc{color:#204a87;font-weight:700}.chroma .kd{color:#204a87;font-weight:700}.chroma .kn{color:#204a87;font-weight:700}.chroma .kp{color:#204a87;font-weight:700}.chroma .kr{color:#204a87;font-weight:700}.chroma .kt{color:#204a87;font-weight:700}.chroma .n{color:#000}.chroma .na{color:#c4a000}.chroma .nb{color:#204a87}.chroma .bp{color:#3465a4}.chroma .nc{color:#000}.chroma .no{color:#000}.chroma .nd{color:#5c35cc;font-weight:700}.chroma .ni{color:var(--operatorOrange)}.chroma .ne{color:#c00;font-weight:700}.chroma .nf{color:#000}.chroma .fm{color:#000}.chroma .nl{color:#f57900}.chroma .nn{color:#000}.chroma .nx{color:#000}.chroma .py{color:#000}.chroma .nt{color:#204a87;font-weight:700}.chroma .nv{color:#000}.chroma .vc{color:#000}.chroma .vg{color:#000}.chroma .vi{color:#000}.chroma .vm{color:#000}.chroma .l{color:#000}.chroma .ld{color:#000}.chroma .s{color:var(--stringGreen)}.chroma .sa{color:var(--stringGreen)}.chroma .sb{color:var(--stringGreen)}.chroma .sc{color:var(--stringGreen)}.chroma .dl{color:var(--stringGreen)}.chroma .sd{color:#8f5902;font-style:italic}.chroma .s2{color:var(--stringGreen)}.chroma .se{color:var(--stringGreen)}.chroma .sh{color:var(--stringGreen)}.chroma .si{color:var(--stringGreen)}.chroma .sx{color:var(--stringGreen)}.chroma .sr{color:var(--stringGreen)}.chroma .s1{color:var(--stringGreen)}.chroma .ss{color:var(--stringGreen)}.chroma .m{color:#0000cf;font-weight:700}.chroma .mb{color:#0000cf;font-weight:700}.chroma .mf{color:#0000cf;font-weight:700}.chroma .mh{color:#0000cf;font-weight:700}.chroma .mi{color:#0000cf;font-weight:700}.chroma .il{color:#0000cf;font-weight:700}.chroma .mo{color:#0000cf;font-weight:700}.chroma .o{color:var(--operatorOrange);font-weight:700}.chroma .ow{color:#204a87;font-weight:700}.chroma .p{color:#000;font-weight:700}.chroma .c{color:#8f5902;font-style:italic}.chroma .ch{color:#8f5902;font-style:italic}.chroma .cm{color:#8f5902;font-style:italic}.chroma .c1{color:#8f5902;font-style:italic}.chroma .cs{color:#8f5902;font-style:italic}.chroma .cp{color:#8f5902;font-style:italic}.chroma .cpf{color:#8f5902;font-style:italic}.chroma .g{color:#000}.chroma .gd{color:#a40000}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#ef2929}.chroma .gh{color:navy;font-weight:700}.chroma .gi{color:#00a000}.chroma .go{color:#000;font-style:italic}.chroma .gp{color:#8f5902}.chroma .gs{color:#000;font-weight:700}.chroma .gu{color:purple;font-weight:700}.chroma .gt{color:#a40000;font-weight:700}.chroma .gl{color:#000;text-decoration:underline}.chroma .w{color:#f8f8f8;text-decoration:underline}</style>
</head>
<body>
<div class=wrapper>
<header class=site-header>
<div class="site-title-container mute-links">
<h1 class=site-title><a href=/>Primary Unit</a></h1>
<p class=site-byline><i>by</i> Rob Wells</p>
</div>
<nav id=site-nav>
<ul class="site-links mute-links">
<li><a href=/about/>About</a></li>
<li><a href=/books/>Books I’ve read</a></li>
<li>
Feed:
<a href=/feed.json>JSON</a>,
<a href=/rss.xml>RSS</a>
</li>
</ul>
</nav>
</header>
<main>
<article>
<header>
<h2 class=mute-links><a href=/2017/03/textexpander-to-launchbar-snippets/>TextExpander to LaunchBar snippets</a></h2>
<p><time datetime=2017-03-01T17:00:00+0000>Wednesday, March 1 2017</time></p>
</header>
<p>Catching up on my RSS feeds, I’ve just been through Dr Drang’s posts from nearly a year ago about switching away from TextExpander (<a href=http://leancrew.com/all-this/2016/04/the-new-textexpander/>1</a>, <a href=http://leancrew.com/all-this/2016/04/importing-textexpander-snippets-to-keyboard-maestro/>2</a>, <a href=http://leancrew.com/all-this/2016/04/a-little-more-textexpander/>3</a>, <a href=http://leancrew.com/all-this/2016/06/final-thoughts-on-switching-from-textexpander/>4</a>). I’m a bit behind.</p>
<p>And since everything on here is effectively hero-worship to Dr Drang, it’s time to catch up. Well, that, or it’s actually sensible to think about switching away from TextExpander; the last update to the non-subscription version (5.1.4) was on February 21 2016.</p>
<p>There isn’t anything in the subscription version for me. I barely use the features of TextExpander 5, rarely create new snippets, and generally am bad at using it.</p>
<p class=full-width>
<img src=/images/2017-03-01-reminder.png alt="A TextExpander reminder notification." class=no-border>
</p>
<p>I get the snippet reminder notification <em>all the time</em>, to the point where it’s frustrating. I am not good at remembering snippet abbreviations. That’s not necessarily helped by TextExpander encouraging me to create snippets for things that I type frequently for a short amount of time, only to then not type the phrase and forget the snippet exists entirely. Then we’re back to the snippet reminder again the next time I do type the phrase.</p>
<p class=full-width>
<img src=/images/2017-03-01-inline-search.png alt="TextExpander’s inline search." class=no-border>
</p>
<p>For a while I was using the inline search, which is really good. And then I forgot the shortcut for that and would periodically open the menubar — where of course the shortcut for inline search is not listed — and get frustrated each time.</p>
<p>I am bad at using TextExpander and I feel bad.</p>
<p class=full-width>
<img src=/images/2017-03-01-suggestion-1.png alt="A TextExpander suggestion notification." class=no-border>
</p>
<p>Because of this, I didn’t really want to switch snippets to Keyboard Maestro or one of the TextExpander-alikes.</p>
<p>Instead I settled on using <a href=https://help.obdev.at/resources/launchbar/help/Snippets.html>LaunchBar’s snippets</a>, which you search in exactly the same way that you search the main LaunchBar catalogue. Setting a keyboard shortcut for snippets and enabling “sub-search only” means that they’re not cluttering up your usual results either: they’re available when I type <span class=osx-menu>⌃⌥⌘Space</span> but otherwise out the way.</p>
<p>It’s a similar advantage to when <a href=/2013/11/die-bookmarks-bar-die/>I moved my Safari bookmarklets to LaunchBar</a>: if I forget the shortcut I can just type what I want.</p>
<p class=full-width>
<img src=/images/2017-03-01-star-search.png alt="A search for ‘star’ in LaunchBar’s snippets." class=no-border>
</p>
<p>But so far this is just like TextExpander’s own inline search. And because snippets are part of LaunchBar there are some restrictions in using them <em>with LaunchBar</em>. Why bother?</p>
<p>Well, the overriding reason is still that TextExpander 5 is done. Sooner or later it’s going to stop working. It’s not a matter of whether I should switch but what to.</p>
<p>LaunchBar is a good fit because I use it everywhere, all the time. The snippets are just text files on disk, and so can be deleted or renamed directly from LaunchBar like any other file. They can be created too by sending items to the Add Snippet action.</p>
<p>Honestly I was a bit dismissive when snippets appeared in LaunchBar (“Why wouldn’t you just use TextExpander?”) but as a long-standing LaunchBar user they slot into my workflow seamlessly.</p>
<p>The placeholders are more limited than in TextExpander, which is fine, and snippets are plain-text only, which is again fine as I had very few script snippets and fewer that I used. Anything I keep around will find a new home in Keyboard Maestro or FastScripts.</p>
<p>As with Keyboard Maestro, the snippet dates are formatted with Unicode patterns rather than strftime — which is a bit uncomfortable for me but never mind.</p>
<p>I do have one major criticism of LaunchBar though. If you followed the link to its <a href=https://help.obdev.at/resources/launchbar/help/Snippets.html>snippet documentation</a> you’ll perhaps notice the old-style LaunchBar interface. Why?</p>
<blockquote>
<h4 id=help-not-yet-availablelb-help><a href=https://help.obdev.at/products/launchbar/documentation.html>Help not yet available</a></h4>
<p>The Help for LaunchBar 6 is already in the works and will be available soon. In the meantime you might take a look at the Help of LaunchBar 5. Most of the information found there is still valid for LaunchBar 6.</p>
</blockquote>
<p>LaunchBar 6 was released in June 2014. Maybe the docs will be in LaunchBar 7? In the meantime, time to actually read that copy of <a href=https://www.takecontrolbooks.com/launchbar>Take Control of LaunchBar</a>.</p>
<h3 id=exporting-your-bookmarks-from-textexpander>Exporting your bookmarks from TextExpander</h3>
<p>TextExpander doesn’t actually have an export option but it’s pretty easy to get your snippets out of the settings file, which for me was a single XML plist file Settings.textexpander.</p>
<p>As a warning, at the end of this I still had to do some manual work to tidy the snippets up, and none of the placeholders (where applicable) are converted. Excluding spelling correction snippets, I only have about 120 (many of which I deleted), but if you have many more this could be a problem.</p>
<p>But with that in mind hopefully it shows how simple it is to get at the actual data and reconfigure it into something useful for you. It’s broken up into parts and isn’t the most refined because it’s the result of mucking about in a Jupyter notebook until I got something that worked well enough.</p>
<p>First, the set-up (with the TextExpander settings file copied to my desktop):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>plistlib</span>
<span class=kn>import</span> <span class=nn>json</span>

<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;/Users/robjwells/Desktop/Settings.textexpander&#39;</span><span class=p>,</span>
          <span class=n>mode</span><span class=o>=</span><span class=s1>&#39;rb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>plist_file</span><span class=p>:</span>
    <span class=n>plist_data</span> <span class=o>=</span> <span class=n>plistlib</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>plist_file</span><span class=p>)</span>
<span class=n>snippets</span> <span class=o>=</span> <span class=n>plist_data</span><span class=p>[</span><span class=s1>&#39;snippetsTE2&#39;</span><span class=p>]</span>
</code></pre></div><p>If we then pretty-print the first snippet you can get an idea of the format:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=p>{</span><span class=s1>&#39;abbreviation&#39;</span><span class=p>:</span> <span class=s1>&#39;;rjw&#39;</span><span class=p>,</span>
 <span class=s1>&#39;abbreviationMode&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
 <span class=s1>&#39;creationDate&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2014</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>33</span><span class=p>,</span> <span class=mi>41</span><span class=p>),</span>
 <span class=s1>&#39;label&#39;</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
 <span class=s1>&#39;lastUsed&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2017</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>28</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>56</span><span class=p>,</span> <span class=mi>15</span><span class=p>),</span>
 <span class=s1>&#39;modificationDate&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2014</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>33</span><span class=p>,</span> <span class=mi>47</span><span class=p>),</span>
 <span class=s1>&#39;plainText&#39;</span><span class=p>:</span> <span class=s1>&#39;robjwells&#39;</span><span class=p>,</span>
 <span class=s1>&#39;snippetType&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
 <span class=s1>&#39;useCount&#39;</span><span class=p>:</span> <span class=mi>11</span><span class=p>,</span>
 <span class=s1>&#39;uuidString&#39;</span><span class=p>:</span> <span class=s1>&#39;87B39A64-B704-46CC-A82D-C3BB07A9C9B4&#39;</span><span class=p>}</span>
</code></pre></div><p>It’s fairly trivial to then pick out the fields you want:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=n>export_snippets</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span>
        <span class=s1>&#39;abbr&#39;</span><span class=p>:</span> <span class=n>snip</span><span class=p>[</span><span class=s1>&#39;abbreviation&#39;</span><span class=p>],</span>
        <span class=s1>&#39;label&#39;</span><span class=p>:</span> <span class=n>snip</span><span class=p>[</span><span class=s1>&#39;label&#39;</span><span class=p>],</span>
        <span class=s1>&#39;text&#39;</span><span class=p>:</span> <span class=n>snip</span><span class=p>[</span><span class=s1>&#39;plainText&#39;</span><span class=p>],</span>
        <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=n>snip</span><span class=p>[</span><span class=s1>&#39;snippetType&#39;</span><span class=p>]</span>
    <span class=p>}</span>
    <span class=k>for</span> <span class=n>snip</span> <span class=ow>in</span> <span class=n>snippets</span>
<span class=p>]</span>
</code></pre></div><p>The type field represents whether the snippet is plain text (0), AppleScript (2) or (3) a “shell” script (or Python or whatever). I imagine that type 1 is rich text, but I don’t have any rich text snippets. We’re keeping it around for use later.</p>
<p>And that first snippet is now:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=p>{</span><span class=s1>&#39;abbr&#39;</span><span class=p>:</span> <span class=s1>&#39;;rjw&#39;</span><span class=p>,</span> <span class=s1>&#39;label&#39;</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=s1>&#39;text&#39;</span><span class=p>:</span> <span class=s1>&#39;robjwells&#39;</span><span class=p>,</span> <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>}</span>
</code></pre></div><p>At this point, before doing any further processing, I wanted to get rid of the spelling correction snippets. The ordering of my snippets meant that I could just find the “header” snippet and exclude everything that follows.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>for</span> <span class=n>idx</span><span class=p>,</span> <span class=n>snip</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>export_snippets</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>snip</span><span class=p>[</span><span class=s1>&#39;text&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;</span><span class=se>\u00bb</span><span class=s1> Auto Correct - Spelling&#39;</span><span class=p>:</span>
        <span class=c1># Start of spelling correction snippets</span>
        <span class=k>break</span>
<span class=n>export_snippets</span> <span class=o>=</span> <span class=n>export_snippets</span><span class=p>[:</span><span class=n>idx</span><span class=p>]</span>
</code></pre></div><p>For those that remain we now create a filename where the snippet text will be saved:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>string</span>

<span class=k>def</span> <span class=nf>make_safe_filename</span><span class=p>(</span><span class=n>text</span><span class=p>):</span>
    <span class=n>invalid_chars</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=s1>&#39;/:</span><span class=se>\t\n\\</span><span class=s1>;&#39;</span><span class=p>)</span>
    <span class=n>text</span> <span class=o>=</span> <span class=n>text</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=s1>&#39;-&#39;</span><span class=p>)</span>
    <span class=k>return</span> <span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>char</span> <span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>text</span>
                   <span class=k>if</span> <span class=n>char</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>invalid_chars</span><span class=p>)</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>

<span class=k>for</span> <span class=n>snip</span> <span class=ow>in</span> <span class=n>export_snippets</span><span class=p>:</span>
    <span class=n>abbr</span> <span class=o>=</span> <span class=n>make_safe_filename</span><span class=p>(</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;abbr&#39;</span><span class=p>])</span>
    <span class=n>label</span> <span class=o>=</span> <span class=n>make_safe_filename</span><span class=p>(</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;label&#39;</span><span class=p>])</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>label</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;text&#39;</span><span class=p>])</span> <span class=o>&lt;</span> <span class=mi>20</span><span class=p>:</span>
        <span class=n>label</span> <span class=o>=</span> <span class=n>make_safe_filename</span><span class=p>(</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;text&#39;</span><span class=p>])</span>
    <span class=k>if</span> <span class=n>label</span> <span class=ow>and</span> <span class=n>abbr</span><span class=p>:</span>
        <span class=n>name</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>abbr</span><span class=si>}</span><span class=s1> - </span><span class=si>{</span><span class=n>label</span><span class=si>}</span><span class=s1>&#39;</span>
    <span class=k>elif</span> <span class=n>abbr</span><span class=p>:</span>
        <span class=n>name</span> <span class=o>=</span> <span class=n>abbr</span>
    <span class=n>snip</span><span class=p>[</span><span class=s1>&#39;file&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>name</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</code></pre></div><p>The way I strip the abbreviation and label down is fairly arbitrary, but I exclude characters that may cause problems on the file system and also the semicolon — my no-longer-needed snippet prefix.</p>
<p>The code above is not what I actually used last night to name the snippets, but it could have saved me some work in Name Mangler. The important thing to note is that, in TextExpander, if a snippet doesn’t have a label the snippet content is shown instead. That’s what the length check is doing: if there’s no label and the snippet text is short, use the snippet text itself to name the file.</p>
<p>Now we finally deal with the snippet type. The “shell” snippets aren’t necessarily <em>shell</em> scripts so the “shell-rename” extension is to prompt me to change it to something more appropriate (.py, .sh).</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=n>snippet_types</span> <span class=o>=</span> <span class=p>{</span>
    <span class=mi>0</span><span class=p>:</span> <span class=s1>&#39;txt&#39;</span><span class=p>,</span>
    <span class=mi>2</span><span class=p>:</span> <span class=s1>&#39;applescript&#39;</span><span class=p>,</span>
    <span class=mi>3</span><span class=p>:</span> <span class=s1>&#39;shell-rename&#39;</span><span class=p>,</span>
    <span class=p>}</span>
<span class=k>for</span> <span class=n>snip</span> <span class=ow>in</span> <span class=n>export_snippets</span><span class=p>:</span>
    <span class=n>snip</span><span class=p>[</span><span class=s1>&#39;file&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;.&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
        <span class=p>[</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;file&#39;</span><span class=p>],</span> <span class=n>snippet_types</span><span class=p>[</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;type&#39;</span><span class=p>]]])</span>
</code></pre></div><p>Printing that first snippet again:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=p>{</span><span class=s1>&#39;abbr&#39;</span><span class=p>:</span> <span class=s1>&#39;;rjw&#39;</span><span class=p>,</span> <span class=s1>&#39;label&#39;</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=s1>&#39;text&#39;</span><span class=p>:</span> <span class=s1>&#39;robjwells&#39;</span><span class=p>,</span>
 <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;file&#39;</span><span class=p>:</span> <span class=s1>&#39;rjw.txt&#39;</span><span class=p>}</span>
</code></pre></div><p>And lastly writing the snippets out:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>snippets_folder</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=s1>&#39;/Users/robjwells/Desktop/te-snippets/&#39;</span><span class=p>)</span>
<span class=n>snippets_folder</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>for</span> <span class=n>snip</span> <span class=ow>in</span> <span class=n>export_snippets</span><span class=p>:</span>
    <span class=n>file_path</span> <span class=o>=</span> <span class=n>snippets_folder</span><span class=o>.</span><span class=n>joinpath</span><span class=p>(</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;file&#39;</span><span class=p>])</span>
    <span class=n>file_path</span><span class=o>.</span><span class=n>write_text</span><span class=p>(</span><span class=n>snip</span><span class=p>[</span><span class=s1>&#39;text&#39;</span><span class=p>])</span>
</code></pre></div><p>I then went through each snippet to clear out ones that wouldn’t work in LaunchBar (shell and AppleScript snippets), ones I don’t use, and ones that needed placeholders updating. I also renamed many snippets to tidy things up.</p>
<p>I have left the abbreviation for several snippets in the filename, so that any snippet-typing habits aren’t completely wasted, and trained LaunchBar for a couple of snippets where I don’t want an old abbreviation hanging off the front (for example, “iso” gets me “Current Date (ISO Format)”).</p>
</article>
</main>
<footer class=site-footer>
<small class=mute-links>
This work is licensed under a
<a rel=license href=https://creativecommons.org/licenses/by/4.0/>
Creative Commons Attribution 4.0 International License</a>.
</small>
</footer>
</div>
</body>
</html>